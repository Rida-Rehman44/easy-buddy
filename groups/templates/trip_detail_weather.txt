 <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;

                    fetch(`/weatherapi/?lat=${lat}&lon=${lon}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data.current && data.current.temp_c !== undefined && data.current.condition) {
                                document.getElementById('weather').innerHTML = `
                                    <h2>Weather:</h2>
                                    <p>Temperature: ${data.current.temp_c}Â°C</p>
                                    <p>Condition: ${data.current.condition.text}</p>
                                `;
                            } else {
                                document.getElementById('weather').innerHTML = 'Weather data not available.';
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching weather data:', error);
                            document.getElementById('weather').innerHTML = 'Error fetching weather data.';
                        });
                }, function(error) {
                    console.error('Geolocation Error:', error);
                    document.getElementById('weather').innerHTML = 'Geolocation error: ' + error.message;
                });
            } else {
                document.getElementById('weather').innerHTML = 'Geolocation is not supported by this browser.';
            }
        });